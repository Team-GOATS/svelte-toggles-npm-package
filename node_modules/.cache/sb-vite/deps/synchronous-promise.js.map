{
  "version": 3,
  "sources": ["../../../synchronous-promise/index.js"],
  "sourcesContent": ["/* jshint node: true */\r\n\"use strict\";\r\n\r\nfunction makeArrayFrom(obj) {\r\n  return Array.prototype.slice.apply(obj);\r\n}\r\n\r\nvar\r\n  PENDING = \"pending\",\r\n  RESOLVED = \"resolved\",\r\n  REJECTED = \"rejected\";\r\n\r\nfunction SynchronousPromise(handler) {\r\n  this.status = PENDING;\r\n  this._continuations = [];\r\n  this._parent = null;\r\n  this._paused = false;\r\n  if (handler) {\r\n    handler.call(\r\n      this,\r\n      this._continueWith.bind(this),\r\n      this._failWith.bind(this)\r\n    );\r\n  }\r\n}\r\n\r\nfunction looksLikeAPromise(obj) {\r\n  return obj && typeof (obj.then) === \"function\";\r\n}\r\n\r\nfunction passThrough(value) {\r\n  return value;\r\n}\r\n\r\nSynchronousPromise.prototype = {\r\n  then: function (nextFn, catchFn) {\r\n    var next = SynchronousPromise.unresolved()._setParent(this);\r\n    if (this._isRejected()) {\r\n      if (this._paused) {\r\n        this._continuations.push({\r\n          promise: next,\r\n          nextFn: nextFn,\r\n          catchFn: catchFn\r\n        });\r\n        return next;\r\n      }\r\n      if (catchFn) {\r\n        try {\r\n          var catchResult = catchFn(this._error);\r\n          if (looksLikeAPromise(catchResult)) {\r\n            this._chainPromiseData(catchResult, next);\r\n            return next;\r\n          } else {\r\n            return SynchronousPromise.resolve(catchResult)._setParent(this);\r\n          }\r\n        } catch (e) {\r\n          return SynchronousPromise.reject(e)._setParent(this);\r\n        }\r\n      }\r\n      return SynchronousPromise.reject(this._error)._setParent(this);\r\n    }\r\n    this._continuations.push({\r\n      promise: next,\r\n      nextFn: nextFn,\r\n      catchFn: catchFn\r\n    });\r\n    this._runResolutions();\r\n    return next;\r\n  },\r\n  catch: function (handler) {\r\n    if (this._isResolved()) {\r\n      return SynchronousPromise.resolve(this._data)._setParent(this);\r\n    }\r\n    var next = SynchronousPromise.unresolved()._setParent(this);\r\n    this._continuations.push({\r\n      promise: next,\r\n      catchFn: handler\r\n    });\r\n    this._runRejections();\r\n    return next;\r\n  },\r\n  finally: function (callback) {\r\n    var ran = false;\r\n\r\n    function runFinally(result, err) {\r\n      if (!ran) {\r\n        ran = true;\r\n        if (!callback) {\r\n          callback = passThrough;\r\n        }\r\n        var callbackResult = callback(result);\r\n        if (looksLikeAPromise(callbackResult)) {\r\n          return callbackResult.then(function () {\r\n            if (err) {\r\n              throw err;\r\n            }\r\n            return result;\r\n          });\r\n        } else {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n      .then(function (result) {\r\n        return runFinally(result);\r\n      })\r\n      .catch(function (err) {\r\n        return runFinally(null, err);\r\n      });\r\n  },\r\n  pause: function () {\r\n    this._paused = true;\r\n    return this;\r\n  },\r\n  resume: function () {\r\n    var firstPaused = this._findFirstPaused();\r\n    if (firstPaused) {\r\n      firstPaused._paused = false;\r\n      firstPaused._runResolutions();\r\n      firstPaused._runRejections();\r\n    }\r\n    return this;\r\n  },\r\n  _findAncestry: function () {\r\n    return this._continuations.reduce(function (acc, cur) {\r\n      if (cur.promise) {\r\n        var node = {\r\n          promise: cur.promise,\r\n          children: cur.promise._findAncestry()\r\n        };\r\n        acc.push(node);\r\n      }\r\n      return acc;\r\n    }, []);\r\n  },\r\n  _setParent: function (parent) {\r\n    if (this._parent) {\r\n      throw new Error(\"parent already set\");\r\n    }\r\n    this._parent = parent;\r\n    return this;\r\n  },\r\n  _continueWith: function (data) {\r\n    var firstPending = this._findFirstPending();\r\n    if (firstPending) {\r\n      firstPending._data = data;\r\n      firstPending._setResolved();\r\n    }\r\n  },\r\n  _findFirstPending: function () {\r\n    return this._findFirstAncestor(function (test) {\r\n      return test._isPending && test._isPending();\r\n    });\r\n  },\r\n  _findFirstPaused: function () {\r\n    return this._findFirstAncestor(function (test) {\r\n      return test._paused;\r\n    });\r\n  },\r\n  _findFirstAncestor: function (matching) {\r\n    var test = this;\r\n    var result;\r\n    while (test) {\r\n      if (matching(test)) {\r\n        result = test;\r\n      }\r\n      test = test._parent;\r\n    }\r\n    return result;\r\n  },\r\n  _failWith: function (error) {\r\n    var firstRejected = this._findFirstPending();\r\n    if (firstRejected) {\r\n      firstRejected._error = error;\r\n      firstRejected._setRejected();\r\n    }\r\n  },\r\n  _takeContinuations: function () {\r\n    return this._continuations.splice(0, this._continuations.length);\r\n  },\r\n  _runRejections: function () {\r\n    if (this._paused || !this._isRejected()) {\r\n      return;\r\n    }\r\n    var\r\n      error = this._error,\r\n      continuations = this._takeContinuations(),\r\n      self = this;\r\n    continuations.forEach(function (cont) {\r\n      if (cont.catchFn) {\r\n        try {\r\n          var catchResult = cont.catchFn(error);\r\n          self._handleUserFunctionResult(catchResult, cont.promise);\r\n        } catch (e) {\r\n          cont.promise.reject(e);\r\n        }\r\n      } else {\r\n        cont.promise.reject(error);\r\n      }\r\n    });\r\n  },\r\n  _runResolutions: function () {\r\n    if (this._paused || !this._isResolved() || this._isPending()) {\r\n      return;\r\n    }\r\n    var continuations = this._takeContinuations();\r\n    var data = this._data;\r\n    var self = this;\r\n    continuations.forEach(function (cont) {\r\n      if (cont.nextFn) {\r\n        try {\r\n          var result = cont.nextFn(data);\r\n          self._handleUserFunctionResult(result, cont.promise);\r\n        } catch (e) {\r\n          self._handleResolutionError(e, cont);\r\n        }\r\n      } else if (cont.promise) {\r\n        cont.promise.resolve(data);\r\n      }\r\n    });\r\n    if (looksLikeAPromise(this._data)) {\r\n      return this._handleWhenResolvedDataIsPromise(this._data);\r\n    }\r\n  },\r\n  _handleResolutionError: function (e, continuation) {\r\n    this._setRejected();\r\n    if (continuation.catchFn) {\r\n      try {\r\n        continuation.catchFn(e);\r\n        return;\r\n      } catch (e2) {\r\n        e = e2;\r\n      }\r\n    }\r\n    if (continuation.promise) {\r\n      continuation.promise.reject(e);\r\n    }\r\n  },\r\n  _handleWhenResolvedDataIsPromise: function (data) {\r\n    var self = this;\r\n    return data.then(function (result) {\r\n      self._data = result;\r\n      self._runResolutions();\r\n    }).catch(function (error) {\r\n      self._error = error;\r\n      self._setRejected();\r\n      self._runRejections();\r\n    });\r\n  },\r\n  _handleUserFunctionResult: function (data, nextSynchronousPromise) {\r\n    if (looksLikeAPromise(data)) {\r\n      this._chainPromiseData(data, nextSynchronousPromise);\r\n    } else {\r\n      nextSynchronousPromise.resolve(data);\r\n    }\r\n  },\r\n  _chainPromiseData: function (promiseData, nextSynchronousPromise) {\r\n    promiseData.then(function (newData) {\r\n      nextSynchronousPromise.resolve(newData);\r\n    }).catch(function (newError) {\r\n      nextSynchronousPromise.reject(newError);\r\n    });\r\n  },\r\n  _setResolved: function () {\r\n    this.status = RESOLVED;\r\n    if (!this._paused) {\r\n      this._runResolutions();\r\n    }\r\n  },\r\n  _setRejected: function () {\r\n    this.status = REJECTED;\r\n    if (!this._paused) {\r\n      this._runRejections();\r\n    }\r\n  },\r\n  _isPending: function () {\r\n    return this.status === PENDING;\r\n  },\r\n  _isResolved: function () {\r\n    return this.status === RESOLVED;\r\n  },\r\n  _isRejected: function () {\r\n    return this.status === REJECTED;\r\n  }\r\n};\r\n\r\nSynchronousPromise.resolve = function (result) {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    if (looksLikeAPromise(result)) {\r\n      result.then(function (newResult) {\r\n        resolve(newResult);\r\n      }).catch(function (error) {\r\n        reject(error);\r\n      });\r\n    } else {\r\n      resolve(result);\r\n    }\r\n  });\r\n};\r\n\r\nSynchronousPromise.reject = function (result) {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    reject(result);\r\n  });\r\n};\r\n\r\nSynchronousPromise.unresolved = function () {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    this.resolve = resolve;\r\n    this.reject = reject;\r\n  });\r\n};\r\n\r\nSynchronousPromise.all = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.resolve([]);\r\n  }\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    var\r\n      allData = [],\r\n      numResolved = 0,\r\n      doResolve = function () {\r\n        if (numResolved === args.length) {\r\n          resolve(allData);\r\n        }\r\n      },\r\n      rejected = false,\r\n      doReject = function (err) {\r\n        if (rejected) {\r\n          return;\r\n        }\r\n        rejected = true;\r\n        reject(err);\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        allData[idx] = thisResult;\r\n        numResolved += 1;\r\n        doResolve();\r\n      }).catch(function (err) {\r\n        doReject(err);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nfunction createAggregateErrorFrom(errors) {\r\n  /* jshint ignore:start */\r\n  if (typeof window !== \"undefined\" && \"AggregateError\" in window) {\r\n    return new window.AggregateError(errors);\r\n  }\r\n  /* jshint ignore:end */\r\n\r\n  return { errors: errors };\r\n}\r\n\r\nSynchronousPromise.any = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.reject(createAggregateErrorFrom([]));\r\n  }\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    var\r\n      allErrors = [],\r\n      numRejected = 0,\r\n      doReject = function () {\r\n        if (numRejected === args.length) {\r\n          reject(createAggregateErrorFrom(allErrors));\r\n        }\r\n      },\r\n      resolved = false,\r\n      doResolve = function (result) {\r\n        if (resolved) {\r\n          return;\r\n        }\r\n        resolved = true;\r\n        resolve(result);\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        doResolve(thisResult);\r\n      }).catch(function (err) {\r\n        allErrors[idx] = err;\r\n        numRejected += 1;\r\n        doReject();\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nSynchronousPromise.allSettled = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.resolve([]);\r\n  }\r\n  return new SynchronousPromise(function (resolve) {\r\n    var\r\n      allData = [],\r\n      numSettled = 0,\r\n      doSettled = function () {\r\n        numSettled += 1;\r\n        if (numSettled === args.length) {\r\n          resolve(allData);\r\n        }\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        allData[idx] = {\r\n          status: \"fulfilled\",\r\n          value: thisResult\r\n        };\r\n        doSettled();\r\n      }).catch(function (err) {\r\n        allData[idx] = {\r\n          status: \"rejected\",\r\n          reason: err\r\n        };\r\n        doSettled();\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\n/* jshint ignore:start */\r\nif (Promise === SynchronousPromise) {\r\n  throw new Error(\"Please use SynchronousPromise.installGlobally() to install globally\");\r\n}\r\nvar RealPromise = Promise;\r\nSynchronousPromise.installGlobally = function (__awaiter) {\r\n  if (Promise === SynchronousPromise) {\r\n    return __awaiter;\r\n  }\r\n  var result = patchAwaiterIfRequired(__awaiter);\r\n  Promise = SynchronousPromise;\r\n  return result;\r\n};\r\n\r\nSynchronousPromise.uninstallGlobally = function () {\r\n  if (Promise === SynchronousPromise) {\r\n    Promise = RealPromise;\r\n  }\r\n};\r\n\r\nfunction patchAwaiterIfRequired(__awaiter) {\r\n  if (typeof (__awaiter) === \"undefined\" || __awaiter.__patched) {\r\n    return __awaiter;\r\n  }\r\n  var originalAwaiter = __awaiter;\r\n  __awaiter = function () {\r\n    var Promise = RealPromise;\r\n    originalAwaiter.apply(this, makeArrayFrom(arguments));\r\n  };\r\n  __awaiter.__patched = true;\r\n  return __awaiter;\r\n}\r\n\r\n/* jshint ignore:end */\r\n\r\nmodule.exports = {\r\n  SynchronousPromise: SynchronousPromise\r\n};\r\n"],
  "mappings": "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",
  "names": ["Promise"]
}
